(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{553:function(e,l,t){Promise.resolve().then(t.bind(t,1326))},1326:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var a=t(9268),n=t(2805),s=t(6006);let r=e=>{let{index:l,move:t,onChange:n,onTabPress:s}=e,r=(e,t)=>{n(l,e.target.value,t)},o=e=>{"Tab"===e.key&&s(l)};return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"w-32px pr-1",children:[l+1,"."]}),(0,a.jsx)("input",{type:"text",className:"border rounded-md p-1 flex-grow w-full ".concat(!1===t.wStatus&&t.w?"border-red-500":"border-gray-300"),value:t.w,onChange:e=>r(e,"w")}),(0,a.jsx)("input",{type:"text",className:"border rounded-md p-1 flex-grow w-full ".concat(!1===t.bStatus&&t.b?"border-red-500":"border-gray-300"),value:t.b,onChange:e=>r(e,"b"),onKeyUp:e=>o(e)})]})};var o=t(8945),c=t(8057),d=e=>{let{value:l,show:t,onAction:n,fileName:s}=e;if(!t)return null;let r=e=>{n&&n(e)};return(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"PGN Download"}),(0,a.jsx)("textarea",{className:"border border-gray-300 rounded-md p-2 w-full h-80 resize-y",value:l,onChange:e=>console.log(e.target.value)}),(0,a.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-gray-500 text-white rounded-md",onClick:()=>r("cancel"),children:"Cancel"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-md ml-2",onClick:()=>{let e=new Blob([l],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=s||"text-file.pgn",a.click(),URL.revokeObjectURL(t)},children:"Download"})]})]})})};function u(){let e=(0,n._)(["\n  grid-template-rows: repeat(2, 32px);\n"]);return u=function(){return e},e}let i=o.ZP.div(u()),b=e=>{let{onMoveChange:l}=e,t=(0,s.useRef)(null),[n,o]=(0,s.useState)(!1),[u,b]=(0,s.useState)(""),[x,v]=(0,s.useState)("chess.pgn"),[h,m]=(0,s.useState)([{label:"Event",value:"",lock:!0},{label:"Site",value:"",lock:!0},{label:"Date",value:"",lock:!0},{label:"Board",value:"",lock:!0},{label:"Round",value:"",lock:!0},{label:"White",value:"",lock:!0},{label:"Black",value:"",lock:!0},{label:"Result",value:"",lock:!0},{label:"TimeControl",value:"",lock:!0}]),[f,p]=(0,s.useState)(Array(20).fill({w:"",b:""})),[w,j]=(0,s.useState)(!0),g=(e,l)=>{let t=[...h];t[e].value=l.target.value,m(t)},N=(e,l)=>{let t=[...h];t[e].label=l.target.value,m(t)},y=(e,t,a)=>{let n=a+"Status",s=[];for(let e of f){if(!e.w||!1===e.wStatus&&e.w||(e.wStatus&&s.push(e.w),!e.b||!1===e.bStatus&&e.b))break;e.bStatus&&s.push(e.b)}let r=function(e,l){let t=new c.qQ;for(let l of e)t.move(l);try{let e=t.move(l);return console.log(e),!0}catch(e){return!1}}(s,t);p(o=>{let c=[...o];return c[e]={...c[e],[a]:t,[n]:void 0===r||r},l&&r&&l([...s,t]),c})},k=e=>{e===f.length&&p([...f,{w:"",b:""}])};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"PGN Attributes"}),(0,a.jsxs)("div",{className:"space-y-2",children:[h.map((e,l)=>(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"text",className:"border border-gray-300 rounded-md p-1 w-48 ".concat(e.lock?"disabled":""),disabled:e.lock,value:e.label,onChange:e=>N(l,e)}),(0,a.jsx)("input",{type:"text",className:"border border-gray-300 rounded-md p-1 flex-1",value:e.value,onChange:e=>g(l,e)})]},l)),(0,a.jsx)("button",{onClick:()=>{m([...h,{label:"",value:"",lock:!1}])},className:"mt-2",children:"Add Attribute"})]}),(0,a.jsx)("h2",{children:"PGN Moves"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("button",{onClick:()=>{j(!w)},className:"mb-2",children:w?"Switch to Raw Mode":"Switch to Grid Mode"}),w?(0,a.jsx)(i,{className:"grid grid-cols-2 gap-1 h-500px overflow-y-auto",ref:t,children:f.map((e,l)=>(0,a.jsx)(r,{onTabPress:k,index:l,move:e,onChange:y},l))}):(0,a.jsx)("textarea",{className:"border border-gray-300 rounded-md p-2 w-full h-500px resize-none",rows:f.length,value:"",onChange:e=>{let l=e.target.value.split(" ").map((e,l)=>({moveIndex:l+1,fen:e}));p(l)}}),(0,a.jsxs)("div",{className:"flex space-x-4 mt-3",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>{let e=[...f];for(let l=0;l<10;l++)e.push({w:"",b:""});p(e)},children:"+ Row"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded",onClick:()=>{var e,l;o(!0);let t=h.reduce((e,l)=>l.label&&l.value?e+"[".concat(l.label,' "').concat(l.value,'"]\n'):e,""),a=f.filter(e=>e.w).map((e,l)=>"".concat(l+1,". ").concat(e.w," ").concat(e.b||"")).join("");b(t+"\n"+a),v("".concat(null===(e=h.find(e=>"White"===e.label))||void 0===e?void 0:e.value," vs ").concat(null===(l=h.find(e=>"Black"===e.label))||void 0===l?void 0:l.value,".pgn"))},children:"Save"})]})]}),(0,a.jsx)(d,{show:n,value:u,fileName:x,onAction:()=>o(!1)})]})};var x=t(6702);let v=e=>{let[l,t]=(0,s.useState)(new c.qQ);return(0,s.useEffect)(()=>{let l=new c.qQ;e.moves.forEach(e=>{try{l.move(e)}catch(e){}}),t(l)},[e.moves]),(0,a.jsxs)("div",{className:"w-full ",children:[(0,a.jsx)(x.r,{id:"BasicBoard",boardWidth:900,position:l.fen()}),";"]})};function h(){let[e,l]=(0,s.useState)([]);return(0,a.jsxs)("main",{className:"flex w-full  min-h-screen flex-row justify-between p-12",children:[(0,a.jsx)("div",{className:"w-9/12 p-4  items-center justify-center",children:(0,a.jsx)(v,{moves:e})}),(0,a.jsx)("div",{className:"w-3/12 p-4",children:(0,a.jsx)("div",{className:"bg-gray-300 p-4",children:(0,a.jsx)(b,{onMoveChange:e=>{l([...e])}})})})]})}}},function(e){e.O(0,[943,727,253,488,744],function(){return e(e.s=553)}),_N_E=e.O()}]);